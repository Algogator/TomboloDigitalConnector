{
  "dataset": {
    "subjects": [
      {
        // We output each LSOA whose name starts with 'Leeds'
        "subjectType": "lsoa",
        "provider": "uk.gov.ons",
        "matchRule": {
          "attribute": "name",
          "pattern": "Leeds%"
        }
      }
    ],
    "datasources": [
      {
        // Importer for the geographic objects for all LSOAs in the UK
        "importerClass": "uk.org.tombolo.importer.ons.OaImporter",
        "datasourceId": "lsoa"
      },
      {
        // Importer for the ONS Census dataset for overcrowding
        "importerClass": "uk.org.tombolo.importer.ons.ONSCensusImporter",
        "datasourceId": "QS408EW"
      }
    ],
    "fields": [
      {
        // Overcrowding Resilience Percentiles normalized nationally
        // I.e. we caluclate percentile boundaries using values for all lsoas in the country
      "fieldClass": "uk.org.tombolo.field.transformation.PercentilesField",
        "label": "OvercrowdingResiliencePercentiles",
        "percentileCount": 4,
        "inverse": true,
        "valueField": {
          // The value field calcualates the overcrowded households in an LSOA
          // as a fraction of the total number of households in the LSOA
        "fieldClass": "uk.org.tombolo.field.transformation.FractionOfTotalField",
          "divisorAttribute": {
            // Attribute for the total number of households in the geography
            // We use this attribute as the denominaor of the fraction
            "provider": "uk.gov.ons",
            "label": "CL_0000127_1"
          },
          "dividendAttributes": [
            // We sum up the following fields and use in the nominator of the fraction
            {
              // Attribute for overcrowding value of -1
              "provider": "uk.gov.ons",
              "label": "CL_0000127_5"
            },
            {
              // Attribute for overcrowding value of -2
              "provider": "uk.gov.ons",
              "label": "CL_0000127_6"
            }
          ]
        },
        "normalizationSubjects": [
          // Specification that determines that we calculate percentile boundaries nationally
          {
            "subjectType": "lsoa"
          }
        ]
      }
    ]
  },
  "exporter": "uk.org.tombolo.exporter.GeoJsonExporter"
}